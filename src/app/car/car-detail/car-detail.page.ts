import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { IonicModule } from '@ionic/angular';
import { ActivatedRoute, Router } from '@angular/router';
import { CarService, ICar } from 'src/app/core/services/car/car.service';
import { caretBack } from 'ionicons/icons';
import { addIcons } from 'ionicons';

@Component({
  selector: 'app-car-detail',
  templateUrl: './car-detail.page.html',
  styleUrls: ['./car-detail.page.scss'],
  standalone: true,
  imports: [IonicModule, CommonModule, FormsModule],
})
export class CarDetailPage implements OnInit {
  public car: ICar | null = null;

  constructor(
    private route: ActivatedRoute,
    private carService: CarService,
    private router: Router
  ) {
    addIcons({ caretBack });
  }

  ngOnInit() {
    const plate = this.route.snapshot.paramMap.get('plate');
    if (plate) {
      this.carService.getCarByPlate(plate).then((car: ICar | null) => {
        if (car) {
          car.frontPicture =
            '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';
          this.car = car;
        }
      });
    }
  }

  public goToCarPage(): void {
    this.router.navigate(['/car']);
  }
}
